<!DOCTYPE html><html><head><meta charset='UTF-8'><meta name='viewport' content='initial-scale=1,width=device-width,height=device-height,viewport-fit=cover,maximum-scale=1,user-scalable=no'><style>*::-webkit-scrollbar{display:none;}*::-webkit-scrollbar-thumb{display:none;} *{overscroll-behavior:none;}body {font-size:18px;background-color:var(--wn);border-collapse:collapse;border:none;margin:0;padding:0;border:0;border-spacing:0px;-webkit-touch-callout:none;user-select:none;}</style></head><body><div id='tuesday' style='width:100%;height:100vh;'> </div><script type='text/javascript'>var tue_text_view,tue_text_block,tue_text_element,languare,dialog_text,dialog_timeout,tue_story,tue_bg_music,arr_dialog,timers,story_json=[],tuesday=document.getElementById("tuesday"),tue_name_block=document.createElement("div"),scene=0,dialog=0,dialog_speed=50,dialog_letter=0,tue_set_audio=0,tue_fullScreen=!1,controll=!0,ruby_rt=[];function cmenu(){return!1}function get_lang(){languare=void 0!=navigator.languages?navigator.languages[0].substring(0,2):navigator.languagesubstring(0,2);let e;for(let t=0;t<story_json.parameters.languares.length;t++)languare==story_json.parameters.languares[t]&&(e=!0);e||(languare=story_json.parameters.languares[0])}function load_story(e,t){if("data"==e)story_json=t,base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound();else if("file"==e){let a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||0==this.status)){try{story_json=JSON.parse(this.responseText)}catch(e){this.status>0&&alert("Json structure error")}base_creation(),tuesday.dispatchEvent(new Event("script_loaded")),story_json.parameters.sounds&&creation_sound()}},a.open("GET",t,!0),a.send(),a.onerror=function(){0==this.status&&alert("Error load json file Cross-Origin Resource Sharing(CORS)")}}}function name_block_update(){story_json.parameters.name_panel.color&&(tue_name_block.style.backgroundColor=story_json.parameters.name_panel.color),story_json.parameters.name_panel.color_text?tue_name_block.style.color=story_json.parameters.name_panel.color_text:tue_name_block.style.color=story_json.parameters.text_panel.color_text,tue_name_block.style.position="absolute",tue_name_block.id="tue_name_block",tue_name_block.style.padding=story_json.parameters.name_panel.indent_text,tue_name_block.style.fontSize=story_json.parameters.name_panel.size_text?story_json.parameters.name_panel.size_text:story_json.parameters.font_size,tue_name_block.style.fontFamily=story_json.parameters.name_panel.font_family?story_json.parameters.name_panel.font_family:story_json.parameters.font,tue_name_block.style.display="flex",tue_name_block.style.justifyContent=story_json.parameters.name_panel.align?story_json.parameters.name_panel.align[0]:"center",tue_name_block.style.alignItems=story_json.parameters.name_panel.align?story_json.parameters.name_panel.align[1]:"center",(tue_name_block.style.width=0!=story_json.parameters.name_panel.size[0])&&(tue_name_block.style.width=story_json.parameters.name_panel.size[0]),tue_name_block.style.height=story_json.parameters.name_panel.size[1],tue_name_block.style.left=""==story_json.parameters.name_panel.position[0]||"0"==story_json.parameters.name_panel.position[0]?null:story_json.parameters.name_panel.position[0],tue_name_block.style.right=""==story_json.parameters.name_panel.position[1]||"0"==story_json.parameters.name_panel.position[1]?null:story_json.parameters.name_panel.position[1],tue_name_block.style.top=""==story_json.parameters.name_panel.position[2]||"0"==story_json.parameters.name_panel.position[2]?""==story_json.parameters.name_panel.position[3]||"0"==story_json.parameters.name_panel.position[3]?"0px":null:story_json.parameters.name_panel.position[2],tue_name_block.style.bottom=""==story_json.parameters.name_panel.position[3]||"0"==story_json.parameters.name_panel.position[3]?null:story_json.parameters.name_panel.position[3],tue_name_block.style.zIndex=1001}function base_creation(){if(get_lang(),localStorage.getItem("tue_set_audio")&&(tue_set_audio=JSON.parse(localStorage.getItem("tue_set_audio"))),story_json.parameters.style_file&&add_style(story_json.parameters.style_file),dialog_speed=story_json.parameters.text_panel.dialog_speed,story_json.parameters.title&&(story_json.parameters.title[languare]?document.title=story_json.parameters.title[languare]:document.title=story_json.parameters.title),story_json.parameters.pixelmode&&(tuesday.style.imageRendering="pixelated",tuesday.style.fontSmooth="never"),tuesday.style.backgroundRepeat="no-repeat",tuesday.style.backgroundPosition="center",tuesday.style.position="relative",tuesday.style.overflow="hidden",story_json.parameters.cursors&&story_json.parameters.cursors.main&&(tuesday.style.cursor="url("+art_data(story_json.parameters.cursors.main[0])+") "+story_json.parameters.cursors.main[1]+" "+story_json.parameters.cursors.main[2]+",auto"),tuesday.innerHTML="<table id='tue_text_block' align='center'><tbody><tr><td id='tue_text_element'><div id='tue_text_view'></div></td></tr></tbody></table>",tue_text_block=document.getElementById("tue_text_block"),(tue_text_element=document.getElementById("tue_text_element")).style.position="relative",story_json.parameters.text_panel.className&&(tue_text_block.className=story_json.parameters.text_panel.className),story_json.parameters.text_panel.style&&(tue_text_block.style=story_json.parameters.text_panel.style),tue_text_block.style.position="absolute",story_json.parameters.text_panel.size&&(tue_text_block.style.width=story_json.parameters.text_panel.size[0],tue_text_block.style.height=story_json.parameters.text_panel.size[1],tue_text_element.style.height=story_json.parameters.text_panel.size[1]),story_json.parameters.text_panel.position?(story_json.parameters.text_panel.position[0]&&"0"!=story_json.parameters.text_panel.position[0]||story_json.parameters.text_panel.position[1]&&"0"!=story_json.parameters.text_panel.position[1]?(tue_text_block.style.left="0"!=story_json.parameters.text_panel.position[0]?story_json.parameters.text_panel.position[0]:null,tue_text_block.style.right="0"!=story_json.parameters.text_panel.position[1]?story_json.parameters.text_panel.position[1]:null,tue_text_block.style.margin=null):(tue_text_block.style.marginLeft="auto",tue_text_block.style.marginRight="auto",tue_text_block.style.left=0,tue_text_block.style.right=0),tue_text_block.style.top="0"!=story_json.parameters.text_panel.position[2]?story_json.parameters.text_panel.position[2]:null):(tue_text_block.style.left=0,tue_text_block.style.right=0),tue_text_block.style.bottom="0"!=story_json.parameters.text_panel.indent_bottom?story_json.parameters.text_panel.indent_bottom:null,tue_text_block.style.zIndex=1e3,tue_text_block.style.borderSpacing=0,(tue_text_view=document.getElementById("tue_text_view")).style.boxSizing="border-box",tue_text_view.style.padding=story_json.parameters.text_panel.indent_text,tue_text_view.style.fontSize=story_json.parameters.text_panel.size_text?story_json.parameters.text_panel.size_text:story_json.parameters.font_size,tue_text_view.style.fontFamily=story_json.parameters.text_panel.font_family?story_json.parameters.text_panel.font_family:story_json.parameters.font,tue_text_view.style.whiteSpace="pre-wrap",tue_text_view.style.height="100%",story_json.parameters.text_panel.scroll&&(tue_text_block.style.paddingTop=story_json.parameters.text_panel.indent_text,tue_text_view.style.height=tue_text_element.offsetHeight+"px",tue_text_view.style.position="relative",tue_text_view.style.overflowY="hidden"),story_json.parameters.name_panel&&(story_json.parameters.name_panel.className&&(tue_name_block.className=story_json.parameters.name_panel.className),story_json.parameters.name_panel.style&&(tue_name_block.style=story_json.parameters.name_panel.style),tue_text_element.appendChild(tue_name_block),name_block_update()),(tue_bg_music=document.createElement("AUDIO")).id="tue_bg_music",tuesday.appendChild(tue_bg_music),story_json.parameters.launch_story)tue_story=story_json.parameters.launch_story;else for(let e=0;e<2;e++)if("parameters"!=Object.getOwnPropertyNames(story_json)[e]){story_json.parameters.launch_story=Object.getOwnPropertyNames(story_json)[1],tue_story=story_json.parameters.launch_story;break}bg_art(story_json.parameters.text_panel,"tue_text_block"),tuesday.dispatchEvent(new Event("script_executed")),story_json.parameters.autosave&&localStorage.getItem("tue_auto_data")&&(story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_auto_data"))),creation_buttons(),creation_scene()}function bg_art(e,t,a){if((t=document.getElementById(t)).style.backgroundRepeat="no-repeat",t.style.backgroundPosition=e.art_align?e.art_align[0]+" "+e.art_align[1]:"center",a=a||e.art){let r=art_data(a);r.length>0&&(t.style.backgroundImage="url('"+r+"')")}e.art_size&&("patch"==e.art_size&&(t.style.backgroundImage="none"),"object"==typeof e.art_size?t.style.backgroundSize=e.art_size[0]+" "+e.art_size[1]:"patch"==e.art_size?(t.style.backgroundImage="none",t.style.backgroundSize="none",t.style.backgroundClip="padding-box",t.style.borderStyle="solid",t.style.borderWidth=e.patch[0]+"px "+e.patch[1]+"px "+e.patch[2]+"px "+e.patch[3]+"px",t.style.borderImage="url('"+art_data(e.art)+"') "+e.patch[0]+" "+e.patch[1]+" "+e.patch[2]+" "+e.patch[3]+" stretch stretch"):t.style.backgroundSize=e.art_size)}function creation_buttons(){for(i=0;i<story_json.parameters.buttons.length;i++){let e=document.createElement("div"),t="";story_json.parameters.buttons[i].sound&&(t+=story_json.parameters.buttons[i].sound?get_sound(story_json.parameters.buttons[i].sound):(story_json.parameters.buttons[i].sound_stop?";"+get_stop_sound(story_json.parameters.buttons[i].sound_stop):"")+";"),story_json.parameters.buttons[i].js&&(t+=story_json.parameters.buttons[i].js),e.setAttribute("onclick",t+";"+("tue_audio"==story_json.parameters.buttons[i].name?"set_audio(this,story_json.parameters.buttons["+i+"]);":"")+("tue_fullScreen"==story_json.parameters.buttons[i].name?"full_screen(this,story_json.parameters.buttons["+i+"]);":"")+("tue_speech"==story_json.parameters.buttons[i].name?"play_synth(art_data(story_json.parameters.buttons["+i+"].text1),art_data(story_json.parameters.buttons["+i+"].text2));":"")+(story_json[story_json.parameters.buttons[i].name]?"go_to('"+story_json.parameters.buttons[i].name+"');":"")),story_json.parameters.buttons[i].className&&(e.className=story_json.parameters.buttons[i].className),story_json.parameters.buttons[i].style&&(e.style=story_json.parameters.buttons[i].style),story_json.parameters.buttons[i].text&&("object"!=typeof story_json.parameters.buttons[i].text||story_json.parameters.buttons[i].text[languare]&&"object"!=typeof story_json.parameters.buttons[i].text[languare])&&(e.innerHTML=values_button(art_data(story_json.parameters.buttons[i].text)),e.style.padding=story_json.parameters.buttons[i].indent_text,e.style.display="flex",e.style.whiteSpace="pre-wrap",e.style.justifyContent=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[0]:"center",e.style.alignItems=story_json.parameters.buttons[i].align?story_json.parameters.buttons[i].align[1]:"center",e.style.textAlign=e.style.justifyContent,e.style.color=story_json.parameters.buttons[i].color_text,e.style.fontSize=story_json.parameters.buttons[i].size_text?story_json.parameters.buttons[i].size_text:story_json.parameters.font_size,e.style.fontFamily=story_json.parameters.buttons[i].font_family?story_json.parameters.buttons[i].font_family:story_json.parameters.font),e.style.zIndex=2e3+i,"none"==story_json.parameters.buttons[i].name||story_json[story_json.parameters.buttons[i].name]||(e.id=story_json.parameters.buttons[i].name),e.classList.add("tue_controll"),e.style.position="absolute",e.style.transformOrigin="top left","0"!=story_json.parameters.buttons[i].size[0]&&(e.style.width=story_json.parameters.buttons[i].size[0]),"0"!=story_json.parameters.buttons[i].size[1]&&(e.style.height=story_json.parameters.buttons[i].size[1]),e.style.backgroundColor=story_json.parameters.buttons[i].color,e.style.backgroundRepeat="no-repeat",story_json.parameters.cursors&&story_json.parameters.cursors.button&&(e.style.cursor="url("+art_data(story_json.parameters.cursors.button[0])+") "+story_json.parameters.cursors.button[1]+" "+story_json.parameters.cursors.button[2]+",auto"),e.style.backgroundPosition=story_json.parameters.buttons[i].art_align?story_json.parameters.buttons[i].art_align[0]+" "+story_json.parameters.buttons[i].art_align[1]:"center",story_json.parameters.buttons[i].art&&(e.style.backgroundImage="url('"+art_data(story_json.parameters.buttons[i].art)+"')"),story_json.parameters.buttons[i].art_size&&("patch"==story_json.parameters.buttons[i].art_size&&(e.style.backgroundImage="none"),"object"==typeof story_json.parameters.buttons[i].art_size?e.style.backgroundSize=story_json.parameters.buttons[i].art_size[0]+" "+story_json.parameters.buttons[i].art_size[1]:"patch"==story_json.parameters.buttons[i].art_size?(e.style.backgroundImage="none",e.style.backgroundSize="none",e.style.backgroundClip="padding-box",e.style.borderStyle="solid",e.style.borderWidth=story_json.parameters.buttons[i].patch[0]+"px "+story_json.parameters.buttons[i].patch[1]+"px "+story_json.parameters.buttons[i].patch[2]+"px "+story_json.parameters.buttons[i].patch[3]+"px",e.style.borderImage="url('"+art_data(story_json.parameters.buttons[i].art)+"') "+story_json.parameters.buttons[i].patch[0]+" "+story_json.parameters.buttons[i].patch[1]+" "+story_json.parameters.buttons[i].patch[2]+" "+story_json.parameters.buttons[i].patch[3]+" stretch stretch"):e.style.backgroundSize=story_json.parameters.buttons[i].art_size),e.style.transform=(story_json.parameters.buttons[i].hotspot&&0!=story_json.parameters.buttons[i].hotspot[0]&&0!=story_json.parameters.buttons[i].hotspot[1]?" translate("+story_json.parameters.buttons[i].hotspot[0]+","+story_json.parameters.buttons[i].hotspot[1]+")":"")+(story_json.parameters.buttons[i].angle?"rotate("+story_json.parameters.buttons[i].angle+"deg)":""),0!=story_json.parameters.buttons[i].position[0]&&(e.style.left=story_json.parameters.buttons[i].position[0]),0!=story_json.parameters.buttons[i].position[1]&&(e.style.right=story_json.parameters.buttons[i].position[1]),0!=story_json.parameters.buttons[i].position[2]&&(e.style.top=story_json.parameters.buttons[i].position[2]),0!=story_json.parameters.buttons[i].position[3]&&(e.style.bottom=story_json.parameters.buttons[i].position[3]),tuesday.appendChild(e)}if(document.getElementById("tue_next")&&document.getElementById("tue_next").addEventListener("click",function(){go_story()}),document.getElementById("tue_back")&&document.getElementById("tue_back").addEventListener("click",function(){back_story()}),document.getElementById("tue_home")&&document.getElementById("tue_home").addEventListener("click",function(){go_to(story_json.parameters.launch_story)}),document.getElementById("tue_save")&&document.getElementById("tue_save").addEventListener("click",function(){save_stag("bookmark")}),document.getElementById("tue_load")&&document.getElementById("tue_load").addEventListener("click",function(){load_stag("bookmark")}),document.getElementById("tue_fastRewind")&&document.getElementById("tue_fastRewind").addEventListener("click",function(){fast_rewind()}),document.getElementById("tue_load_autosave")&&document.getElementById("tue_load_autosave").addEventListener("click",function(){load_stag("auto")}),story_json.parameters.languares.length>1)for(let a=0;a<story_json.parameters.languares.length;a++)document.getElementById("tue_"+story_json.parameters.languares[a])&&document.getElementById("tue_"+story_json.parameters.languares[a]).setAttribute("onclick","languare ='"+story_json.parameters.languares[a]+"'")}function creation_scene(){if(arr_dialog=story_json[tue_story][scene],del_element("tue_html_scene"),arr_dialog.random_choice){let e=arr_dialog.random_choice[Math.floor(Math.random()*arr_dialog.random_choice.length)][1];"tue_go"!=e?go_to(e):(scene++,dialog=0,creation_scene())}else if(arr_dialog.legacy_choice){for(let t=0;t<arr_dialog.legacy_choice.length;t++){let a=arr_dialog.legacy_choice[t][0],r=arr_dialog.legacy_choice[t][1],s=arr_dialog.legacy_choice[t][2],l=arr_dialog.legacy_choice[t][3];if(">"==r&&story_json.parameters.variables[a]>s){"tue_go"!=l?go_to(l):n();break}if("<"==r&&story_json.parameters.variables[a]<s){"tue_go"!=l?go_to(l):n();break}if("="==r&&story_json.parameters.variables[a]==s){"tue_go"!=l?go_to(l):n();break}else if(arr_dialog.legacy_choice[t].go_to){arr_dialog.legacy_choice[t].go_to&&"tue_go"!=arr_dialog.legacy_choice[t].go_to?go_to(arr_dialog.legacy_choice[t].go_to):n();break}else if(t==arr_dialog.legacy_choice.length-1){n();break}}function n(){scene++,dialog=0,creation_scene()}}else{if(tuesday.style.backgroundSize=arr_dialog.background_size?arr_dialog.background_size:"cover",arr_dialog.background_class?tuesday.className=arr_dialog.background_class:tuesday.className="",arr_dialog.background_color&&(tuesday.style.backgroundColor=arr_dialog.background_color),tuesday.style.backgroundPosition=arr_dialog.background_align?arr_dialog.background_align:"center",arr_dialog.background_image?tuesday.style.backgroundImage="url('"+art_data(arr_dialog.background_image)+"')":tuesday.style.backgroundImage=null,document.getElementById("tue_home")&&(tue_story==story_json.parameters.launch_story?document.getElementById("tue_home").style.visibility="hidden":document.getElementById("tue_home").style.visibility="visible"),arr_dialog.html){let u=document.createElement("div");u.className="tue_html_scene",arr_dialog.html[languare]?(u.innerHTML=arr_dialog.html[languare],tuesday.appendChild(u)):(u.innerHTML=arr_dialog.html,tuesday.appendChild(u))}arr_dialog.background_music&&(tue_bg_music.paused||!tue_bg_music.src.includes(encodeURI(arr_dialog.background_music)))?search_music():arr_dialog.background_music&&""!=arr_dialog.background_music||tue_bg_music.pause(),arr_dialog.dialogs&&arr_dialog.dialogs.length>0?creation_dialog():(del_element("tue_art"),del_element("tue_choice"),del_element("tue_html_dialog"),tue_text_block.style.visibility="hidden",tue_name_block.style.visibility="hidden"),tuesday.dispatchEvent(new Event(Object.keys(arr_dialog)[0]))}}function creation_dialog(next_scene){if("hidden"!=(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).controll&&"hidden_here"!=arr_dialog.controll&&(tue_story!=story_json.parameters.launch_story||arr_dialog||0!=dialog||0!=scene)){if("visible"==arr_dialog.controll||!arr_dialog.controll||!0==controll){controll=!0;let buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll");for(let i=0;i<buttons.length;i++)buttons[i].style.visibility="visible"}}else{controll="hidden_here"==arr_dialog.controll;let buttons=document.getElementById("tuesday").getElementsByClassName("tue_controll");for(let i=0;i<buttons.length;i++)buttons[i].style.visibility="hidden"}if(document.getElementById("tue_next")&&(scene!=story_json[tue_story].length-1||dialog!=story_json[tue_story][scene].dialogs.length-1||arr_dialog.go_to?controll&&(document.getElementById("tue_next").style.visibility="visible"):document.getElementById("tue_next").style.visibility="hidden"),document.getElementById("tue_back")&&(0!=scene||0!=dialog||arr_dialog.back_to?controll&&(document.getElementById("tue_back").style.visibility="visible"):document.getElementById("tue_back").style.visibility="hidden"),arr_dialog.text&&""!=arr_dialog.text&&""!=arr_dialog.text[languare]?(tue_text_view.innerHTML="",tue_text_block.style.visibility="visible",values_in_text(!1),clearTimeout(dialog_timeout),anim_text(),arr_dialog.text.className&&(tue_text_block.className=arr_dialog.text.className)):arr_dialog.text_add&&""!=arr_dialog.text_add&&""!=arr_dialog.text_add[languare]?(tue_text_block.style.visibility="visible",values_in_text(!0),clearTimeout(dialog_timeout),anim_text()):tue_text_block.style.visibility="hidden",arr_dialog.color?tue_text_block.style.backgroundColor=arr_dialog.color:story_json.parameters.text_panel.color&&(tue_text_block.style.backgroundColor=story_json.parameters.text_panel.color),arr_dialog.color_text?tue_text_view.style.color=arr_dialog.color_text:story_json.parameters.text_panel.color_text&&(tue_text_view.style.color=story_json.parameters.text_panel.color_text),arr_dialog.name?(story_json.parameters.characters&&bg_art(story_json.parameters.name_panel,"tue_name_block",!!story_json.parameters.characters[arr_dialog.name]&&!!story_json.parameters.characters[arr_dialog.name].art&&story_json.parameters.characters[arr_dialog.name].art),arr_dialog.name[languare]?(tue_name_block.innerHTML=values_button(arr_dialog.name[languare]),tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):story_json.parameters.characters?story_json.parameters.characters[arr_dialog.name]?(story_json.parameters.characters[arr_dialog.name].style&&(tue_name_block.style=story_json.parameters.characters[arr_dialog.name].style,name_block_update()),tue_name_block.innerHTML=values_button(story_json.parameters.characters[arr_dialog.name][languare]),tue_name_block.style.backgroundColor=story_json.parameters.characters[arr_dialog.name].color,tue_name_block.style.color=story_json.parameters.characters[arr_dialog.name].color_text,story_json.parameters.characters[arr_dialog.name].className&&(tue_name_block.className=story_json.parameters.characters[arr_dialog.name].className)):(tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.backgroundColor=arr_dialog.name.color,tue_name_block.style.color=arr_dialog.name.color_text,arr_dialog.name.className&&(tue_name_block.className=arr_dialog.name.className)):tue_name_block.innerHTML=arr_dialog.name,tue_name_block.style.visibility="visible"):tue_name_block.style.visibility="hidden",arr_dialog.video){let video=document.getElementById("tue_video");video?(video.src.includes(encodeURI(art_data(arr_dialog.video.url)))||(video.src=art_data(arr_dialog.video.url)),arr_dialog.video.time_start&&(video.currentTime=arr_dialog.video.time_start),arr_dialog.video.fit||(video_size(),window.addEventListener("resize",video_size,!0)),video.style.transform="translate(-50%,-50%)",video.style.left="50%",video.style.top="50%"):((video=document.createElement("video")).id="tue_video",video.classList.add("tue_v"),video.src=art_data(arr_dialog.video.url),arr_dialog.video.style?video.style=arr_dialog.video.style:video.style="",arr_dialog.video.className&&(video.style=arr_dialog.video.className+" tue_v"),video.style.position="absolute",video.setAttribute("onloadedmetadata",""),video.style.transform="translate(-50%,-50%)",video.style.left="50%",video.style.top="50%"),arr_dialog.video.fit&&(window.removeEventListener("resize",video_size,!0),"contain"==arr_dialog.video.fit?(video.style.width="100%",video.style.height="100%"):"position"==arr_dialog.video.fit&&(video.style.transformOrigin="top left",arr_dialog.video.angle?video.style.transform="rotate("+arr_dialog.video.angle+"deg)":video.style.transform="none",video.style.width=arr_dialog.video.size[0],video.style.height=arr_dialog.video.size[1],0!=arr_dialog.video.position[0]&&(video.style.right=null,video.style.left=arr_dialog.video.position[0]),0!=arr_dialog.video.position[1]&&(video.style.left=null,video.style.right=arr_dialog.video.position[1]),0!=arr_dialog.video.position[2]&&(video.style.bottom=null,video.style.top=arr_dialog.video.position[2]),0!=arr_dialog.video.position[3]&&(video.style.top=null,video.style.bottom=arr_dialog.video.position[3]))),arr_dialog.video.loop?video.loop=arr_dialog.video.loop:video.loop=!1,arr_dialog.video.sound&&arr_dialog.video.sound>0?(video.muted=!1,video.volume=arr_dialog.video.sound/100):video.muted=!0,arr_dialog.video.time_start?video.onloadedmetadata=function(){this.currentTime=arr_dialog.video.time_start,arr_dialog.video.fit||video_size(),arr_dialog.video.stop&&this.pause()}:arr_dialog.video.fit||(video.onloadedmetadata=function(){video_size(),window.addEventListener("script_executed",video_size,!0),window.addEventListener("resize",video_size,!0)}),arr_dialog.video.time_end?arr_dialog.video.loop?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.currentTime=arr_dialog.video.time_start?arr_dialog.video.time_start:0)}:arr_dialog.video.go_to?video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&(video.pause(),"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to))}:video.ontimeupdate=function(){video.currentTime>=arr_dialog.video.time_end&&video.pause()}:video.onended=function(){"tue_go"==arr_dialog.video.go_to?go_story(!0):go_to(arr_dialog.video.go_to)},arr_dialog.video.stop&&!0==arr_dialog.video.stop||(video.autoplay=!0),tuesday.prepend(video)}else del_element("tue_v");if(arr_dialog.art){let old=document.getElementById("tuesday").getElementsByClassName("tue_art"),src=!1;if(old.length>0){for(d=0;d<old.length;d++)old[d].classList.add("img_del");for(i=0;i<arr_dialog.art.length;i++){for(o=0,src=!1;o<old.length;o++)if(arr_dialog.art[i].url==old[o].getAttribute("volume")||arr_dialog.art[i].url[languare]==old[o].getAttribute("volume")){arr_dialog.art[i].style&&arr_dialog.art[i].style.length>0&&(old[o].style="user-select:text;"+arr_dialog.art[i].style,old[o].style.position="absolute",old[o].style.transformOrigin="top left"),arr_dialog.art[i].move&&0!=arr_dialog.art[i].move?(old[o].style.transitionDuration=arr_dialog.art[i].move+"s",arr_dialog.art[i].speed&&""!=arr_dialog.art[i].speed?old[o].style.transitionTimingFunction=arr_dialog.art[i].speed:old[o].style.transitionTimingFunction=null):(old[o].style.transitionDuration=null,old[o].style.transitionTimingFunction=null),arr_dialog.art[i].opacity?old[o].style.opacity=arr_dialog.art[i].opacity:old[o].style.opacity=null,arr_dialog.art[i].fit&&(old[o].style.objectFit=arr_dialog.art[i].fit),arr_dialog.art[i].size&&(old[o].style.width=arr_dialog.art[i].size[0],old[o].style.height=arr_dialog.art[i].size[1]),arr_dialog.art[i].align?old[o].style.objectPosition=arr_dialog.art[i].align[0]+" "+arr_dialog.art[i].align[1]:old[o].style.objectPosition="center",old[o].style.transform=(arr_dialog.art[i].hotspot&&0!=arr_dialog.art[i].hotspot[0]&&0!=arr_dialog.art[i].hotspot[1]?" translate("+arr_dialog.art[i].hotspot[0]+","+arr_dialog.art[i].hotspot[1]+")":"")+(arr_dialog.art[i].angle?"rotate("+arr_dialog.art[i].angle+"deg)":""),0!=arr_dialog.art[i].position[0]&&(old[o].style.left=arr_dialog.art[i].position[0]),0!=arr_dialog.art[i].position[1]&&(old[o].style.left="calc(100% - "+arr_dialog.art[i].position[1]+" - "+("auto"==arr_dialog.art[i].size[0]?arr_dialog.art[i].size[1]:arr_dialog.art[i].size[0])+")"),0!=arr_dialog.art[i].position[2]&&(old[o].style.top=arr_dialog.art[i].position[2]),0!=arr_dialog.art[i].position[3]&&(old[o].style.top="calc(100% - "+arr_dialog.art[i].position[3]+" - "+("auto"==arr_dialog.art[i].size[1]?arr_dialog.art[i].size[0]:arr_dialog.art[i].size[1])+")"),src=!0,arr_dialog.art[i].show_if&&show_if(arr_dialog.art[i].show_if,old[o]),old[o].style.zIndex=i,old[o].classList.remove("img_del");break}!1==src&&creation_art(i)}del_element("img_del")}else for(i=0;i<arr_dialog.art.length;i++)creation_art(i);function creation_art(e){let t=document.createElement("img"),a=art_data(arr_dialog.art[e].url);arr_dialog.art[e].className&&(t.classList=arr_dialog.art[e].className),t.src="string"==typeof a&&a.length>0?a:"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>",t.setAttribute("volume",arr_dialog.art[e].url[languare]?arr_dialog.art[e].url[languare]:arr_dialog.art[e].url),t.classList.add("tue_art"),t.style="user-select:text;"+(arr_dialog.art[e].style?arr_dialog.art[e].style:""),t.style.position="absolute",t.style.transformOrigin="top left",arr_dialog.art[e].fit&&(t.style.objectFit=arr_dialog.art[e].fit),arr_dialog.art[e].opacity?t.style.opacity=arr_dialog.art[e].opacity:t.style.opacity=null,arr_dialog.art[e].size&&(t.style.width=arr_dialog.art[e].size[0],t.style.height=arr_dialog.art[e].size[1]),t.style.transform=(arr_dialog.art[e].hotspot&&0!=arr_dialog.art[e].hotspot[0]&&0!=arr_dialog.art[e].hotspot[1]?" translate("+arr_dialog.art[e].hotspot[0]+","+arr_dialog.art[e].hotspot[1]+")":"")+(arr_dialog.art[e].angle?"rotate("+arr_dialog.art[e].angle+"deg)":""),arr_dialog.art[e].align&&(t.style.objectPosition=arr_dialog.art[e].align[0]+" "+arr_dialog.art[e].align[1]),0!=arr_dialog.art[e].position[0]&&(t.style.left=arr_dialog.art[e].position[0]),0!=arr_dialog.art[e].position[1]&&(t.style.left="calc(100% - "+arr_dialog.art[e].position[1]+" - "+arr_dialog.art[e].size[0]+")"),0!=arr_dialog.art[e].position[2]&&(t.style.top=arr_dialog.art[e].position[2]),0!=arr_dialog.art[e].position[3]&&(t.style.top="calc(100% - "+arr_dialog.art[e].position[3]+" - "+arr_dialog.art[e].size[1]+")"),t.setAttribute("draggable","false"),t.style.zIndex=e,arr_dialog.art[e].show_if&&show_if(arr_dialog.art[e].show_if,t),tuesday.appendChild(t)}}else del_element("tue_art");let button_ui=document.getElementsByClassName("tue_controll");for(i=0;i<button_ui.length;i++)"tue_audio"==story_json.parameters.buttons[i].name?show_audio(button_ui[i],story_json.parameters.buttons[i]):"tue_fullScreen"==story_json.parameters.buttons[i].name?show_fullscreen(button_ui[i],story_json.parameters.buttons[i]):story_json.parameters.buttons[i].text&&art_data(story_json.parameters.buttons[i].text).length>0&&(button_ui[i].innerHTML=values_button(art_data(story_json.parameters.buttons[i].text)));if(arr_dialog.choice){let interfaces=!1;for(i=0;i<arr_dialog.choice.length;i++){let choice=document.createElement("div");arr_dialog.choice[i].className&&(choice.className=arr_dialog.choice[i].className),arr_dialog.choice[i].style&&(choice.style=arr_dialog.choice[i].style),choice.classList.add("tue_choice"),choice.style.position="absolute",choice.style.transformOrigin="top left",choice.style.backgroundColor=arr_dialog.choice[i].color,choice.style.whiteSpace="pre-wrap",choice.style.backgroundRepeat="no-repeat",choice.style.backgroundPosition=arr_dialog.choice[i].art_align?arr_dialog.choice[i].art_align[0]+" "+arr_dialog.choice[i].art_align[1]:"center",story_json.parameters.cursors&&story_json.parameters.cursors.choice&&(choice.style.cursor="url("+art_data(story_json.parameters.cursors.choice[0])+") "+story_json.parameters.cursors.choice[1]+" "+story_json.parameters.cursors.choice[2]+",auto"),arr_dialog.choice[i].art&&art_data(arr_dialog.choice[i].art).length>0&&(choice.style.backgroundImage="url('"+art_data(arr_dialog.choice[i].art)+"')"),arr_dialog.choice[i].size&&(0!=arr_dialog.choice[i].size[0]&&(choice.style.width=arr_dialog.choice[i].size[0]),0!=arr_dialog.choice[i].size[1]&&(choice.style.height=arr_dialog.choice[i].size[1])),arr_dialog.choice[i].art_size&&("patch"==arr_dialog.choice[i].art_size&&(choice.style.backgroundImage="none"),"object"==typeof arr_dialog.choice[i].art_size?choice.style.backgroundSize=arr_dialog.choice[i].art_size[0]+" "+arr_dialog.choice[i].art_size[1]:"patch"==arr_dialog.choice[i].art_size?(choice.style.backgroundImage="none",choice.style.backgroundSize="none",choice.style.backgroundClip="padding-box",choice.style.borderStyle="solid",choice.style.borderWidth=arr_dialog.choice[i].patch[0]+"px "+arr_dialog.choice[i].patch[1]+"px "+arr_dialog.choice[i].patch[2]+"px "+arr_dialog.choice[i].patch[3]+"px",choice.style.borderImage="url('"+art_data(arr_dialog.choice[i].art)+"') "+arr_dialog.choice[i].patch[0]+" "+arr_dialog.choice[i].patch[1]+" "+arr_dialog.choice[i].patch[2]+" "+arr_dialog.choice[i].patch[3]+" stretch stretch"):choice.style.backgroundSize=arr_dialog.choice[i].art_size),choice.style.transform=(arr_dialog.choice[i].hotspot&&0!=arr_dialog.choice[i].hotspot[0]&&0!=arr_dialog.choice[i].hotspot[1]?" translate("+arr_dialog.choice[i].hotspot[0]+","+arr_dialog.choice[i].hotspot[1]+")":"")+(arr_dialog.choice[i].angle?"rotate("+arr_dialog.choice[i].angle+"deg)":""),0!=arr_dialog.choice[i].position[0]&&(choice.style.left=arr_dialog.choice[i].position[0]),0!=arr_dialog.choice[i].position[1]&&(choice.style.right=arr_dialog.choice[i].position[1]),0!=arr_dialog.choice[i].position[2]&&(choice.style.top=arr_dialog.choice[i].position[2]),0!=arr_dialog.choice[i].position[3]&&(choice.style.bottom=arr_dialog.choice[i].position[3]),choice.style.color=arr_dialog.choice[i].color_text,choice.style.padding=arr_dialog.choice[i].indent_text,choice.style.fontSize=arr_dialog.choice[i].size_text?arr_dialog.choice[i].size_text:story_json.parameters.font_size,choice.style.fontFamily=arr_dialog.choice[i].font_family?arr_dialog.choice[i].font_family:story_json.parameters.font,choice.style.display="flex",choice.style.justifyContent=arr_dialog.choice[i].align?arr_dialog.choice[i].align[0]:"center",choice.style.alignItems=arr_dialog.choice[i].align?arr_dialog.choice[i].align[1]:"center",choice.style.textAlign=choice.style.justifyContent,choice.style.zIndex=1001+i,arr_dialog.choice[i].show_if&&show_if(arr_dialog.choice[i].show_if,choice),arr_dialog.choice[i].text&&("object"!=typeof arr_dialog.choice[i].text||arr_dialog.choice[i].text[languare]&&"object"!=typeof arr_dialog.choice[i].text[languare])&&(choice.innerHTML=values_button(art_data(arr_dialog.choice[i].text))),"tue_audio"==arr_dialog.choice[i].go_to?show_audio(choice,arr_dialog.choice[i]):"tue_fullScreen"==arr_dialog.choice[i].go_to&&show_fullscreen(choice,arr_dialog.choice[i]);let v="";if(arr_dialog.choice[i].variables)for(let g=0;g<arr_dialog.choice[i].variables.length;g++)"add"==arr_dialog.choice[i].variables[g][1]?v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"+="+(void 0!==story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]?"number"==typeof story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]?story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]:"'"+story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]+"'":"number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";":"set"==arr_dialog.choice[i].variables[g][1]&&(v+="story_json.parameters.variables."+arr_dialog.choice[i].variables[g][0]+"="+(void 0!==story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]?"number"==typeof story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]?story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]:"'"+story_json.parameters.variables[arr_dialog.choice[i].variables[g][2]]+"'":"number"==typeof arr_dialog.choice[i].variables[g][2]?arr_dialog.choice[i].variables[g][2]:"'"+arr_dialog.choice[i].variables[g][2]+"'")+";");if(arr_dialog.choice[i].js&&(v+=arr_dialog.choice[i].js+";"),arr_dialog.choice[i].go_to){let g=arr_dialog.choice[i].go_to;if(interfaces||(interfaces=!arr_dialog.choice[i].url&&"tue_no"!=g),story_json.parameters.languares.length>1)for(let l=0;l<story_json.parameters.languares.length;l++)g=="tue_"+story_json.parameters.languares[l]&&(g=8,choice.setAttribute("onclick",v+"languare='"+story_json.parameters.languares[l]+"';if(story_json.parameters.title&&story_json.parameters.title[languare]){document.title=story_json.parameters.title[languare];};del_element('tue_choice');go_story(true);"+add_sound()));"tue_go"==g||"tue_update_scene"==g?arr_dialog.choice[i].text_from?choice.setAttribute("onclick",v+"dialog="+(dialog+1)+";creation_dialog(true);"+add_sound()+(arr_dialog.choice[i].delete?"this.remove();":"")):choice.setAttribute("onclick","del_element('tue_choice'); "+v+("tue_go"==g?"go_story(true);":"del_element('tue_art');del_element('tue_choice');del_element('tue_html_dialog');creation_dialog();")+add_sound()):"tue_load_autosave"==g?(choice.setAttribute("onclick",v+"load_stag('auto');"+add_sound()),story_json.parameters.autosave&&!localStorage.getItem("tue_auto_data")&&(choice.style.visibility="hidden")):"load"==g||"tue_load"==g?choice.setAttribute("onclick",v+"load_stag('bookmark');"+add_sound()):"tue_save"==g?choice.setAttribute("onclick",v+"save_stag('bookmark');"+add_sound()):"tue_no"==g||""==g?choice.setAttribute("onclick",v+add_sound()):"tue_fullScreen"==g?choice.setAttribute("onclick",v+"full_screen(this, story_json['"+tue_story+"']["+scene+"].dialogs["+dialog+"].choice["+i+"]);"+add_sound()):"tue_fastRewind"==g?choice.setAttribute("onclick",v+"fast_rewind();"+add_sound()):"tue_audio"==g?choice.setAttribute("onclick",v+"set_audio(this, story_json['"+tue_story+"']["+scene+"].dialogs["+dialog+"].choice["+i+"]);"+add_sound()):"tue_speech"==g?choice.setAttribute("onclick",v+"play_synth(art_data(story_json['"+tue_story+"']["+scene+"].dialogs["+dialog+"].choice["+i+"].text1),art_data(story_json['"+tue_story+"']["+scene+"].dialogs["+dialog+"].choice["+i+"].text2));"+add_sound()):"tue_home"==g?choice.setAttribute("onclick",v+'go_to("'+story_json.parameters.launch_story+'");'+add_sound()):"tue_back"==g?choice.setAttribute("onclick",v+"back_story();"+add_sound()):"tue_next"==g?choice.setAttribute("onclick",v+"go_story();"+add_sound()):8!=g&&arr_dialog.choice[i].text_from?choice.setAttribute("onclick",v+"tue_story='"+arr_dialog.choice[i].go_to+"';scene=0;dialog=0;creation_dialog(true);"+add_sound()+(arr_dialog.choice[i].delete?"del_element('tue_choice');":"")):8!=g&&arr_dialog.choice[i].url?choice.setAttribute("onclick",v+"window.open('"+(arr_dialog.choice[i].go_to[languare]?arr_dialog.choice[i].go_to[languare]:arr_dialog.choice[i].go_to)+"','_"+arr_dialog.choice[i].url+"');"+add_sound()+(arr_dialog.choice[i].delete?"del_element('tue_choice');":"")):8!=g&&choice.setAttribute("onclick",v+"go_to('"+g+"');"+add_sound())}else choice.setAttribute("onclick",v+"go_story(true);del_element('tue_choice');"+add_sound());function add_sound(){let e="";return arr_dialog.choice[i].sound&&(e=get_sound(arr_dialog.choice[i].sound)),arr_dialog.choice[i].sound_stop&&(e+=get_stop_sound(arr_dialog.choice[i].sound_stop)),e}tuesday.appendChild(choice)}interfaces&&document.getElementById("tue_next")&&(tue_next.style.visibility="hidden")}if((!next_scene||arr_dialog.html)&&del_element("tue_html_dialog"),arr_dialog.html){if(arr_dialog.html[languare]){let html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html[languare],tuesday.appendChild(html)}else{let html=document.createElement("div");html.className="tue_html_dialog",html.innerHTML=arr_dialog.html,tuesday.appendChild(html)}}if(arr_dialog.variables)for(let i=0;i<arr_dialog.variables.length;i++){let choice_n=arr_dialog.variables[i][0];"add"==arr_dialog.variables[i][1]?(story_json.parameters.variables[choice_n]+=arr_dialog.variables[i][2],tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_add"))):"set"==arr_dialog.variables[i][1]&&(story_json.parameters.variables[choice_n]=arr_dialog.variables[i][2]),tuesday.dispatchEvent(new Event(arr_dialog.variables[i][0]+"_set"))}if(arr_dialog.event&&tuesday.dispatchEvent(new Event(arr_dialog.event)),arr_dialog.sound_stop){let s=arr_dialog.sound_stop[languare]?arr_dialog.sound_stop[languare]:arr_dialog.sound_stop;if("object"==typeof s)for(let i=0;i<s.length;i++)sound_stop(s[i]);else sound_stop(s[languare]?s[languare]:s)}if(arr_dialog.sound&&tue_set_audio<2){let s=arr_dialog.sound[languare]?arr_dialog.sound[languare]:arr_dialog.sound;if("object"==typeof s)for(let i=0;i<s.length;i++)sound_play(s[i]);else sound_play(s[languare]?s[languare]:s)}arr_dialog.js&&eval(arr_dialog.js),clearTimeout(timers),arr_dialog.timer&&!timers&&(timers=setTimeout(function(){"tue_go"==arr_dialog.timer[1]?go_story(!0):"tue_update_scene"==arr_dialog.timer[1]?(del_element("tue_art"),del_element("tue_choice"),del_element("tue_html_dialog"),creation_dialog()):go_to(arr_dialog.timer[1])},arr_dialog.timer[0])),timers=!1,tuesday.dispatchEvent(new Event("creation_dialog"))}function values_in_text(e){arr_dialog=story_json[tue_story][scene].dialogs[dialog];var t="";e?(dialog_letter=dialog_text?dialog_text.length:0,t=void 0!==dialog_text?dialog_text:"",t+=arr_dialog.text_add[languare]?arr_dialog.text_add[languare]:arr_dialog.text_add):(dialog_letter=0,t=arr_dialog.text[languare]?arr_dialog.text[languare]:arr_dialog.text);let a=/<(.*?)>/g;ruby_rt=[];let r=t.matchAll(a);r=Array.from(r);for(var s=0;s<r.length;s++){let l=r[s];if(l[1].includes("=")){var n=l[1].split("=")[0];ruby_rt.push([n,ruby(l[1])]),t=t.replace(l[0],n)}else t=t.replace(l[0],story_json.parameters.variables[l[1]])}dialog_text=t}function values_button(e){let t=e.matchAll(/<(.*?)>/g);t=Array.from(t);for(var a=0;a<t.length;a++){let r=t[a];e=r[1].includes("=")?e.replace(r[0],ruby(r[1])):e.replace(r[0],story_json.parameters.variables[r[1]])}return e}function ruby(e){let t=e.split("=");return"<ruby>"+t[0]+"<rt>"+t[1]+"</rt></ruby>"}function go_story(e){if(0!=story_json[tue_story][scene].dialogs.length&&(check_choice(story_json[tue_story][scene].dialogs)||e)){if(arr_dialog=story_json[tue_story][scene].dialogs[dialog],story_json.parameters.text_panel.show_all_text&&void 0!==dialog_text&&dialog_letter<dialog_text.length)return dialog_letter=dialog_text.length,clearTimeout(dialog_timeout),anim_text(),!1;if(arr_dialog.choice&&del_element("tue_choice"),arr_dialog.go_to){var t=arr_dialog.go_to;"tue_go"==t?(scene++,dialog=0,creation_scene()):go_to(t)}else dialog<story_json[tue_story][scene].dialogs.length-1?(dialog++,arr_dialog.text?"skip"==arr_dialog.text[languare]?go_story():creation_dialog():arr_dialog.text_add&&"skip"==arr_dialog.text_add[languare]?go_story():creation_dialog()):++scene>=story_json[tue_story].length?scene=story_json[tue_story].length-1:(dialog=0,creation_scene());story_json.parameters.autosave&&!story_json[tue_story][scene].dialogs[dialog].no_autosave&&save_stag("auto")}else story_json[tue_story][scene+1]&&(scene++,dialog=0,creation_scene());e||(timers=!1)}function back_story(){(arr_dialog=story_json[tue_story][scene].dialogs[dialog],del_element("tue_choice"),del_element("tue_html_dialog"),0!=story_json[tue_story][scene].dialogs.length&&arr_dialog.back_to)?go_to(arr_dialog.back_to):dialog>0?(dialog-=1,(arr_dialog=story_json[tue_story][scene].dialogs[dialog]).text?"skip"==arr_dialog.text[languare]?back_story():creation_dialog():arr_dialog.text_add?"skip"==arr_dialog.text_add[languare]?back_story():(dialog_text=arr_dialog.text?dialog_text.replace(arr_dialog.text_add[languare],""):"",creation_dialog()):(creation_dialog(),del_element("tue_choice"),del_element("tue_html_dialog"))):((scene-=1)<0?(scene=0,dialog=0):story_json[tue_story][scene].dialogs&&(dialog=story_json[tue_story][scene].dialogs.length-1),creation_scene()),story_json.parameters.autosave&&!story_json[tue_story][scene].dialogs[dialog].no_autosave&&save_stag("auto")}function save_stag(e){localStorage.setItem("tue_"+e+"_scene",scene),localStorage.setItem("tue_"+e+"_dialog",dialog),localStorage.setItem("tue_"+e+"_story",tue_story),story_json.parameters.variables&&localStorage.setItem("tue_"+e+"_data",JSON.stringify(story_json.parameters.variables)),"bookmark"==e&&tuesday.dispatchEvent(new Event("save"))}function load_stag(e){story_json[localStorage.getItem("tue_"+e+"_story")]&&(del_element("tue_choice"),del_element("tue_html_scene"),scene=localStorage.getItem("tue_"+e+"_scene"),dialog=localStorage.getItem("tue_"+e+"_dialog"),tue_story=localStorage.getItem("tue_"+e+"_story"),story_json.parameters.variables=JSON.parse(localStorage.getItem("tue_"+e+"_data")),creation_scene(),search_music(),tuesday.dispatchEvent(new Event("load")))}function go_to(e){e.includes(",")?(tue_story=(e=e.split(","))[0],dialog=e[2],scene=e[1]):(tue_story=e,dialog=0,scene=0),del_element("tue_choice"),del_element("tue_html_dialog"),creation_scene()}function del_element(e){for(var t=document.getElementById("tuesday").getElementsByClassName(e),a=t.length,r=0;r<a;r++)t[0].parentNode.removeChild(t[0])}function anim_text(){if(0==dialog_speed){for(var e=0;e<ruby_rt.length;e++)dialog_text=dialog_text.replaceAll(ruby_rt[e][0],ruby_rt[e][1]);tue_text_view.innerHTML=dialog_text.replace(RegExp("\n","g"),"<br>")}else if(0!=dialog_speed&&dialog_letter<=dialog_text.length)dialog_timeout=setTimeout(add_letter,dialog_speed);else if(dialog_letter>=dialog_text.length){if(arr_dialog.end_text_cursor||story_json.parameters.text_panel.end_text_cursor){var t=JSON.parse(JSON.stringify(arr_dialog.end_text_cursor?arr_dialog.end_text_cursor:!!story_json.parameters.text_panel.end_text_cursor&&story_json.parameters.text_panel.end_text_cursor));""==t[1]&&story_json.parameters.text_panel.end_text_cursor[1]&&(t[1]=story_json.parameters.text_panel.end_text_cursor[1]),""==t[2]&&story_json.parameters.text_panel.end_text_cursor[2]&&(t[2]=story_json.parameters.text_panel.end_text_cursor[2]),""==t[3]&&story_json.parameters.text_panel.end_text_cursor[3]&&(t[3]=story_json.parameters.text_panel.end_text_cursor[3])}tue_text_view.innerHTML="<span style=''>"+tue_text_view.innerHTML+(t&&t[0]?'&nbsp<span style="position:relative;">&nbsp<img src="'+art_data(t[0])+'" style="position:absolute;width:'+(t[1]?t[1]:"auto")+";height:"+(t[2]?t[2]:"auto")+";"+(t[3]?t[3]:"")+'"></span></span>':"</span>"),tuesday.dispatchEvent(new Event("dialog_end"))}story_json.parameters.text_panel.scroll&&(tue_text_view.scrollTop=tue_text_view.scrollHeight)}function add_letter(){for(var e=dialog_text.slice(0,dialog_letter).replace(RegExp("\n","g"),"<br>"),t=0;t<ruby_rt.length;t++)e=e.replaceAll(ruby_rt[t][0],ruby_rt[t][1]);tue_text_view.innerHTML=e,dialog_letter++,anim_text()}function search_music(){for(var e=scene;e>=0;e--)if(story_json[tue_story][e].background_music){tue_bg_music.canPlayType("audio/mpeg")?"number"==typeof story_json[tue_story][e].background_music?tue_bg_music.src=story_json.base[story_json[tue_story][e].background_music-1]:story_json[tue_story][e].background_music.includes("blob:")?tue_bg_music.src=story_json[tue_story][e].background_music:story_json[tue_story][e].background_music.includes(".mp3")?tue_bg_music.src=story_json[tue_story][e].background_music:tue_bg_music.src=story_json[tue_story][e].background_music+".mp3":tue_bg_music.src=story_json[tue_story][e].background_music+".ogg",tue_bg_music.loop=!0,0==tue_set_audio&&tue_bg_music.play();break}}function creation_sound(){for(var e=0;Object.keys(story_json.parameters.sounds)[e];){var t=document.createElement("audio");t.preload="auto",t.id=Object.keys(story_json.parameters.sounds)[e],t.canPlayType("audio/mpeg")?story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].includes(";base64")?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].includes("blob:")?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]].includes(".mp3")?t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]:t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".mp3":t.src=story_json.parameters.sounds[Object.keys(story_json.parameters.sounds)[e]]+".ogg",tuesday.appendChild(t),e++}}function get_sound(e){return"if(tue_set_audio<2){"+(e[languare]?"sound_play('"+e[languare]+"');":"sound_play('"+e+"');")+"}"}function get_stop_sound(e){return e[languare]?"sound_stop('"+e[languare]+"');":"sound_stop('"+e+"');"}function sound_play(e){var t=document.getElementById(e);t&&(t.currentTime=0,t.volume=1,t.play())}function sound_stop(e){document.getElementById(e).currentTime=0,document.getElementById(e).pause()}function add_style(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head").item(0).appendChild(t)}function full_screen(e,t){if(tue_fullScreen)tue_fullScreen=!1,t&&t.text&&art_data(t.text).length>0&&(e.innerHTML=values_button(art_data(t.text))),t&&t.art&&art_data(t.art).length>0&&(e.style.backgroundImage="url('"+art_data(t.art)+"')"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{let a=story_json.parameters.resolutions?tuesday.parentNode:tuesday;tue_fullScreen=!0,e&&t&&t.text1&&art_data(t.text1).length>0&&(e.innerHTML=values_button(art_data(t.text1))),e&&t&&t.art1&&art_data(t.art1).length>0&&(e.style.backgroundImage="url('"+art_data(t.art1)+"')"),a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}}function art_data(e){return e[languare]?"number"==typeof e[languare]?story_json.base[e[languare]-1]:e[languare]:"number"==typeof e?story_json.base[e-1]:e}function video_size(){var e=document.getElementById("tue_video"),t=tuesday.getBoundingClientRect();e.videoWidth/e.videoHeight>t.width/t.height?(e.style.height="100%",e.style.width="auto"):(e.style.height="auto",e.style.width="100%")}function show_if(e,t){show=!0;for(var a=1;a<e.length;a++){var r=e[a][0],s=e[a][1],l=void 0!==story_json.parameters.variables[e[a][2]]?story_json.parameters.variables[e[a][2]]:e[a][2];if("="==s){if(story_json.parameters.variables[r]!=l){show=!1;break}}else if(">"==s){if(story_json.parameters.variables[r]<=l){show=!1;break}}else if("<"==s&&story_json.parameters.variables[r]>=l){show=!1;break}if(!show)break}!show&&e[0]?t.style.visibility="hidden":show&&!e[0]&&(t.style.visibility="hidden")}function fast_rewind(){let e=story_json[tue_story][scene].dialogs;timers=setTimeout(function(){go_story(!0),dialog<e.length&&check_choice(e)?fast_rewind():timers=!1},350)}function check_choice(e){if(!e[dialog].choice)return!0;{let t=!0;return e[dialog].choice.forEach(e=>{"tue_no"!=e.go_to&&(t=!1)}),t}}function set_audio(e,t){if(tue_set_audio=tue_set_audio>1?0:tue_set_audio+1,localStorage.setItem("tue_set_audio",tue_set_audio),0==tue_set_audio?tue_bg_music.play():tue_set_audio>0&&tue_bg_music.pause(),2==tue_set_audio){var a=tuesday.getElementsByTagName("audio");for(let r=0;r<a.length;r++)a[r].pause();"undefined"!=typeof synth&&synth.speaking&&synth.cancel()}show_audio(e,t)}function show_audio(e,t){var a=0!=tue_set_audio?tue_set_audio:"";t["text"+a]&&art_data(t["text"+a]).length>0&&(e.innerHTML=values_button(art_data(t["text"+a]))),t["art"+a]&&art_data(t["art"+a]).length>0&&(e.style.backgroundImage="url('"+art_data(t["art"+a])+"')")}function show_fullscreen(e,t){t["text"+(tue_fullScreen?"1":"")]&&art_data(t["text"+(tue_fullScreen?"1":"")]).length>0&&(e.innerHTML=values_button(art_data(t["text"+(tue_fullScreen?"1":"")]))),t["art"+(tue_fullScreen?"1":"")]&&art_data(t["art"+(tue_fullScreen?"1":"")]).length>0&&(e.style.backgroundImage="url('"+art_data(t["art"+(tue_fullScreen?"1":"")])+"')")}function autoplaysound(){0==tue_set_audio&&tue_bg_music.play(),tuesday.removeEventListener("mousedown",autoplaysound)}document.oncontextmenu=cmenu,tuesday.onmousedown=window.onselectstart=function(){return!1},document.addEventListener("keydown",function(e){let t=e.code;t==story_json.parameters.key.next&&controll?go_story():t==story_json.parameters.key.back&&controll?back_story():t==story_json.parameters.key.main?go_to(story_json.parameters.launch_story):t==story_json.parameters.key.save?save_stag("bookmark"):t==story_json.parameters.key.load?load_stag("bookmark"):t==story_json.parameters.key.autosave?load_stag("auto"):t==story_json.parameters.key.full_screen?full_screen():t==story_json.parameters.key.fast_rewind&&fast_rewind()}),tuesday.addEventListener("mousedown",autoplaysound);function TueAspectRatio(){let e=story_json.parameters.resolutions,t=tuesday.parentNode,i=t.getBoundingClientRect(),n;e[4]?(n=0==i.height||0==i.width?window.innerWidth<window.innerHeight?window.innerWidth/e[0]:window.innerHeight/e[1]:i.width<i.height?i.width/e[0]:i.height/e[1],t.style.margin="0",t.style.overscrollBehavior="none"):0==i.height||0==i.width?(n=e[0]/window.innerWidth>e[1]/window.innerHeight?window.innerWidth/e[0]:window.innerHeight/e[1],tuesday.style.left=(window.innerWidth-e[0]*n)/2+"px",tuesday.style.top=(window.innerHeight-e[1]*n)/2+"px"):(n=e[0]/i.width>e[1]/i.height?i.width/e[0]:i.height/e[1],tuesday.style.left=(i.width-e[0]*n)/2+"px",tuesday.style.top=(i.height-e[1]*n)/2+"px"),t.style.backgroundColor=e[2]&&e[2].length>0?e[2]:"#000",t.style.backgroundImage="url('"+e[3]+"')",t.style.backgroundPosition="center",t.style.backgroundSize="cover",t.style.overflow="hidden",t.style.position="relative",tuesday.style.position="absolute",tuesday.style.transformOrigin="left top",tuesday.style.width=(e[4]?(0==i.width?window.innerWidth:i.width)/n:e[0])+"px",tuesday.style.height=(e[4]?(0==i.height?window.innerHeight:i.height)/n:e[1])+"px",tuesday.style.transform="scale("+n+")"}window.addEventListener("script_executed",TueAspectRatio,!0),window.addEventListener("resize",TueAspectRatio,!0); let tue_screen_control=!0;tuesday.addEventListener("mouseup",function(e){tue_screen_control&&(0==story_json[tue_story][scene].dialogs||check_choice(story_json[tue_story][scene].dialogs))&&go_story(),tue_screen_control=!0}),tuesday.addEventListener("script_loaded",function(e){document.getElementById("tue_next")&&(tue_next.style.pointerEvents="none");for(var t=document.getElementById("tuesday").getElementsByClassName("tue_controll"),n=0;n<t.length;n++)t[n].setAttribute("onmousedown","tue_screen_control=false;")}); tuesday.addEventListener("script_loaded",function(){var e=document.createElement("style");e.type="text/css",e.innerHTML=".cursor{background: center / contain no-repeat url('"+story_json.parameters.touch_show[0]+"');"+story_json.parameters.touch_show[4]+";transform:translate(-50%,-50%);position:absolute;display:block;animation-name:cursor_anim;animation-fill-mode:forwards;pointer-events:none;z-index:3010;}@keyframes cursor_anim{from{opacity:1;}to{opacity:0;}}",document.getElementsByTagName("head")[0].appendChild(e),tuesday.addEventListener(story_json.parameters.touch_show[6]?"touchstart":"mousedown",e=>{let t=story_json.parameters.touch_show,a=document.createElement("div"),o=tuesday.getBoundingClientRect(),s=t[6]?[e.touches[0].pageX,e.touches[0].pageY]:[e.clientX,e.clientY];if(a.className="cursor "+story_json.parameters.touch_show[5],a.style.width=t[1],a.style.height=t[2],a.style.animationDuration=t[3]+"s",story_json.parameters.resolutions){let r=story_json.parameters.resolutions;a.style.left=(r[0]/o.width>r[1]/o.height?r[0]/o.width:r[1]/o.height)*(s[0]-o.left)+"px",a.style.top=(r[0]/o.width>r[1]/o.height?r[0]/o.width:r[1]/o.height)*(s[1]-o.top)+"px"}else a.style.left=s[0]-o.left+"px",a.style.top=s[1]-o.top+"px";setTimeout(function(e){a.remove()},1e3*t[3]),tuesday.appendChild(a)})}); </script><script>let story_novel={"parameters":{"resolutions":[1920,1080,"#000",""],"text_panel":{"size":["95%","27%"],"position":[],"color":"rgba(242,242,242,0.7)","style":"border-radius:16px;backdrop-filter:blur(12px);border-top:2px solid rgba(255,255,255,.7);border-bottom:2px solid rgba(0,0,0,.15);box-shadow: 0px 4px 14px rgba(0,0,0,.15);","color_text":"#000","indent_text":"8px 16px","indent_bottom":"3.5%","dialog_speed":"10","show_all_text":true,"art":{"en":""},"size_text":"40px"},"name_panel":{"style":"border-radius:16px;border-top:1px solid rgba(255,255,255,.5);border-bottom:1px solid rgba(0,0,0,.2);box-shadow: 0px 4px 14px rgba(0,0,0,.15);","size":["","32px"],"position":["0","0","-42px","0"],"indent_text":"0 16px","color_text":"#fff","align":["start","center"],"color":"#555","art":{"en":""}},"title":"new novel","launch_story":"block_1","languares":["en"],"buttons":[{"name":"tue_back","position":["1.79%",0,0,"2.59%"],"size":["25%","25%"],"color_text":"#000","text":"<","hotspot":["0%","0%"],"align":["start","end"],"indent_text":"8px 14px","art":{"en":""},"sound":{"en":""}},{"name":"tue_next","position":[0,"1.67%",0,"3.18%"],"size":["25%","25%"],"color_text":"#000","text":">","hotspot":["0%","0%"],"align":["end","end"],"indent_text":"8px 14px","art":{"en":""},"sound":{"en":""}}],"autosave":true,"font":"Arial","variables":{},"characters":{"Narrator":{"en":"Narrator","color_text":"#ffffff","color":"#000000"},"Marc":{"en":"Sam","color_text":"#ffffff","color":"rgba(0,0,0,0.86)"}},"style_file":"","touch_show":["","32px","32px",1,"background-color:#fff;border-radius:25px;",""]},"block_1":[{"background_image":"outside/outside-door.png","dialogs":[{"text":"I hadn't heard from Mark in four months since the graduation, he was one of my closest friends in school. Out of nowhere, he sends this invitation to his family's house... why now?","color_text":"#ffffff","color":"rgba(0,0,0,0.19)","name":"Narrator","choice":[{"go_to":"tue_go","position":["31.55%",0,"35.21%",0],"size":[0,0],"color":"rgba(242,242,242,0.7)","color_text":"#000","text":{"en":"Knock"},"indent_text":"12px","style":"border-radius:16px;backdrop-filter:blur(12px);border-top:2px solid rgba(255,255,255,.7);border-bottom:2px solid rgba(0,0,0,.15);box-shadow: 0px 4px 14px rgba(0,0,0,.15);","art":{"en":""},"sound":{"en":""},"hotspot":["0%","0%"]}]}],"background_size":"contain"},{"background_image":"inside/Inside-door.png","dialogs":[{"video":{"url":"0001-0048.mp4","fit":"contain","go_to":"tue_go"}}]},{"background_image":"1.png","dialogs":[{"text":"Hey dude! You actually made it! I honestly thought youd bailed when you didn't text back an hour ago.","color_text":"#ffffff","color":"rgba(0,0,0,0.45)","name":"Narrator"},{"text":"Look at you. You look good, Sam. Seriously. Adult life treated you better than it did me.","color_text":"#ffffff","color":"rgba(0,0,0,0.43)","name":"Narrator"},{"text":"I surely do not miss the dorm food and three hours of sleep, anyway.","color_text":"#000000","color":"rgba(255,255,255,0.72)","name":"Marc"},{"text":"True. Though to be fair it wasn't just exams that kept us up late, sometime it was just partying, i for one do miss the parties.","color_text":"#ffffff","color":"rgba(0,0,0,0.19)","name":"Narrator"}],"background_size":"contain"},{"background_image":"2.png","dialogs":[{"text":"Alright buddy come on in, let's get some drinks in the kitchen","name":"Narrator","color_text":"rgb(255,255,255)","color":"rgba(0,0,0,0.53)"}],"background_size":"contain"},{"background_image":"3.png","dialogs":[{"text":"I'll head over to the kitchen and get us some drinks, hang tight man","name":"Narrator","color_text":"#ffffff","color":"rgba(0,0,0,0.53)"},{"text":"don't spike my drink dude !","name":"Marc"},{"text":"it only took peer pressure in a frat party for you to suck me off so why would i drug you ","name":"Narrator","color":"rgba(0,0,0,0.52)","color_text":"rgb(255,255,255)"},{"text":"Oh fuck off that's not happening again unless you're a millionaire","name":"Marc"}],"background_size":"contain"},{"background_image":"4.png","dialogs":[{"text":"God, this place is obscene. We used to fight over who got the desk chair, and now hes got a living room  that probably costs more than my tuition.","name":"Marc"},{"text":"I have a feeling he didn't invite me here to just \"watch a movie\"","name":"Marc"},{"text":"He helped me cheat in the exams, invited me to cool parties and event introduced me to his rich friends,honestly i wouldn't even mind it if he wants to be friends with benefits. let's see how it goes .","name":"Marc"}],"background_size":"contain"},{"background_image":"5.png","dialogs":[{"text":"it's been a minute since we hung out and had some drinks, so how is the job search going ?","color_text":"rgb(255,255,255)","name":"Narrator","color":"rgba(0,0,0,0.5)"}],"background_size":"contain"},{"background_image":"6.png","dialogs":[{"text":"It's as bad as you'd expect, I've sent like a million resumes and I'm pretty sure they all just go straight into a void.","color_text":"rgb(0,0,0)","name":"Marc","color":"rgba(255,255,255,0.51)"},{"text":"And you, how's the crypto trading going ? are you a millionaire yet ?","color_text":"rgb(0,0,0)","color":"rgba(255,255,255,0.46)","name":"Marc"}],"background_size":"contain"},{"background_image":"7.png","dialogs":[{"text":"sensing sarcasm there, i would have you know that it's been going pretty great","color_text":"#ffffff","color":"rgba(0,0,0,0.54)","name":"Narrator"}],"background_size":"contain"},{"background_image":"8.png","dialogs":[{"text":"i mean i don't even have to work a single day and i make hundreds of thousands a month, what more can a young man ask for.","color_text":"#ffffff","color":"rgba(0,0,0,0.54)","name":"Narrator"}],"background_size":"contain"},{"dialogs":[{"text":"that's awesome dude I'm happy for you ! ","color_text":"#ffffff","color":"rgba(145,145,145,0.48)"}],"background_image":"9.png","background_size":"contain"},{"background_image":"outside/outside-door.png","dialogs":[{"video":{"url":"outro.mp4","fit":"contain"},"text":"Sam and Marc spend the next few hours catching up","color_text":"#ffffff","color":"rgba(255,255,255,0.51)","name":"Narrator"}],"background_size":"contain"}]};load_story('data',story_novel);</script></body></html>